UNDERSTAND PROMISES AND ASYNC/AWAIT. COMPARE WITH CALLBACKS

### **ğŸš€ Blog Application Exercise: Build a Modular API with Users & Posts**  

This exercise will test **all the concepts** you have learned, including:  
âœ… **Express Router** for modular route handling  
âœ… **MySQL (`mysql2`)** with `createConnection()` and `execute()` for prepared statements  
âœ… **CRUD operations** for **Users** and **Posts**  
âœ… **Middleware** (e.g., request logging)  
âœ… **Environment Variables** (`dotenv`) for security  
âœ… **Project Structure & Modularization**  

---

## **ğŸ“ Task Description**  
You will build a **Blog API** with two modules:  
1ï¸âƒ£ **Users** â€“ Manage users (Create, Retrieve, Update, Delete)  
2ï¸âƒ£ **Posts** â€“ Manage blog posts, each belonging to a user  

---

## **ğŸ”¨ Features to Implement**
### **1. Users Module**  
- **Create User (`POST /users`)**: Add a new user with `name` and `email`  
- **Get All Users (`GET /users`)**: Fetch all users  
- **Get User by ID (`GET /users/:id`)**: Fetch a specific user  
- **Update User (`PUT /users/:id`)**: Modify user details  
- **Delete User (`DELETE /users/:id`)**: Remove a user  

### **2. Posts Module**  
- **Create Post (`POST /posts`)**: Add a new post with `title`, `content`, and `user_id` (author)  
- **Get All Posts (`GET /posts`)**: Fetch all posts  
- **Get a Post by ID (`GET /posts/:id`)**: Fetch a single post  
- **Update Post (`PUT /posts/:id`)**: Modify post details  
- **Delete Post (`DELETE /posts/:id`)**: Remove a post  

---

## **ğŸ“‚ Project Structure**  
Your project should follow this structure:  
```
/blog-api
â”‚â”€â”€ /node_modules         # Installed dependencies
â”‚â”€â”€ /routes               # Route handlers
â”‚    â”œâ”€â”€ users.js         # User routes
â”‚    â”œâ”€â”€ posts.js         # Post routes
â”‚â”€â”€ /controllers          # Business logic for each module
â”‚    â”œâ”€â”€ userController.js
â”‚    â”œâ”€â”€ postController.js
â”‚â”€â”€ /middleware           # Middleware functions
â”‚    â”œâ”€â”€ logger.js        # Logs request details
â”‚â”€â”€ /config               # Database connection
â”‚    â”œâ”€â”€ db.js            # MySQL connection
â”‚â”€â”€ /models               # SQL table creation scripts
â”‚â”€â”€ .env                  # Environment variables
â”‚â”€â”€ package.json          # Project dependencies
â”‚â”€â”€ index.js              # Main entry file
```

---

## **ğŸ”— Database Setup (MySQL)**  
Create the database and tables in MySQL:  
```sql
CREATE DATABASE blogdb;
USE blogdb;

CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL
);

CREATE TABLE posts (
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    content TEXT NOT NULL,
    user_id INT NOT NULL,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
```
- **Users Table**: Stores `id`, `name`, `email`  
- **Posts Table**: Stores `id`, `title`, `content`, and `user_id` (links to users)  

---

## **âœ… Exercise Guidelines**
### **1ï¸âƒ£ Setting Up the Database Connection**
- Use **`mysql2`**  
- Use **`createConnection()`** (not pooling)  
- Use **`.env`** to store database credentials  
- Use **`execute()`** (prepared statements) for queries  

### **2ï¸âƒ£ Implement Express Router & Controllers**
- **Users routes (`routes/users.js`)** and **Users controller (`controllers/userController.js`)**  
- **Posts routes (`routes/posts.js`)** and **Posts controller (`controllers/postController.js`)**  

### **3ï¸âƒ£ Middleware**
- Create a middleware (`logger.js`) that logs every request to the console  

### **4ï¸âƒ£ CRUD Operations**
- Implement all CRUD operations using **async/await** and **prepared statements (`execute()`)**  

### **5ï¸âƒ£ Testing Your API**
- Use **Postman or Thunder Client** to test each endpoint  

---

## **ğŸ“Œ Example Test Cases**
### **Users**
âœ… `POST /users` â†’ `{ "name": "John Doe", "email": "john@example.com" }`  
âœ… `GET /users` â†’ Returns all users  
âœ… `GET /users/1` â†’ Returns user with ID 1  
âœ… `PUT /users/1` â†’ Updates user data  
âœ… `DELETE /users/1` â†’ Removes user  

### **Posts**
âœ… `POST /posts` â†’ `{ "title": "First Post", "content": "Hello World", "user_id": 1 }`  
âœ… `GET /posts` â†’ Returns all posts  
âœ… `GET /posts/1` â†’ Returns post with ID 1  
âœ… `PUT /posts/1` â†’ Updates post data  
âœ… `DELETE /posts/1` â†’ Removes post  

---

### **ğŸ¯ Submission**
- Ensure your project **follows the structure**  
- Implement **all endpoints**  
- Test with Postman/Thunder Client  

ğŸš€ **Once complete, your API should be fully functional and ready for production!**
